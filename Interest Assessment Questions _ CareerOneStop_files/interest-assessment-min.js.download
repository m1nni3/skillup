/*
 CareerOneStop-Client 2023-11-27 
*/
var IntroPage=function(){this.init=function(){(-1<window.location.pathname.toLowerCase().indexOf("interest-assessment.aspx")||-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-app.aspx"))&&(removeCookie(),startAssessmentButtonLink())};var removeCookie=function(){isEmpty(getCookie("recordedInterestAssessmentSelection"))||delete_cookie("recordedInterestAssessmentSelection")},startAssessmentButtonLink=function(){var interestAssessmentStartButton=document.getElementById("interestAssessmentStartButton");isEmpty(interestAssessmentStartButton)||interestAssessmentStartButton.addEventListener("click",e=>function(e){e.preventDefault(),window.location.href=location.pathname.replace("interest-assessment.aspx","interest-assessment-questions.aspx")}(e))}},QuestionPage=(document.addEventListener("DOMContentLoaded",function(){(new IntroPage).init(),(new QuestionPage).init(),(new ResultPage).init(),(new ScorePage).init(),Page.prototype.initializeFocusBehavior=function(params){getParameterByName(params)&&(-1===document.referrer.indexOf(window.location.pathname)&&""!==document.referrer||(isEmpty(document.getElementById("DynamicResultMessage"))?ErrorFocus:ResultFocus)(),params=document.getElementById("ErrorResultMessage"),isEmpty(params)||document.referrer!==document.URL||ErrorFocus())},(new Page).initializeFocusBehavior("sortcolumns")},!1),function(){const IAMobileBreakPoint=736;this.init=function(){(-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-questions.aspx")||-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-questions-app.aspx"))&&(reSize(),queryStringUpdate(),cookieUpdate(),nextPage(),previousPage(),addSelectedOption(),updateFocusBorder(),persistAssessmentFromProfileState())};function isMobile(){return window.innerWidth<=IAMobileBreakPoint}function curPage(){return isEmpty(getParameterByName("curPage"))?"1":getParameterByName("curPage")}function pageSize(){return isEmpty(getParameterByName("pagesize"))?"10":getParameterByName("pagesize")}var persistAssessmentFromProfileState=function(){var key,pid=getParameterByName("pid"),loginElement=document.getElementById("header-login");null!=loginElement&&(key=(loginElement=loginElement.textContent)+"-pid",isEmpty(pid)||isEmpty(loginElement)||(loginElement=sessionStorage.getItem(key),isEmpty(loginElement)?sessionStorage.setItem(key,"IA:"+pid):sessionStorage.setItem(key,getUpdatedPids(loginElement,pid))))},getUpdatedPids=function(pids,pid){var pids=pids.split("&"),updatedPid="";return pids.forEach(function(item){""!==updatedPid&&(updatedPid+="&"),-1<item.indexOf("IA:")?updatedPid+="IA:"+pid:updatedPid+=item}),updatedPid},reSize=function(){window.addEventListener("resize",function(){window.innerWidth<=IAMobileBreakPoint&&isEmpty(getParameterByName("pagesize"))&&window.location.reload(),!window.innerWidth<=IAMobileBreakPoint&&!isEmpty(getParameterByName("pagesize")&&!isEmpty(getParameterByName("curPage")))&&window.location.reload()})},queryStringUpdate=function(){var hrefWithoutHash=window.location.pathname+window.location.search,mobile=isMobile();mobile&&-1===window.location.href.indexOf("pagesize")&&(window.location.href=updateQueryStringParameter(hrefWithoutHash,"curPage","1")+"&pagesize=1"+window.location.hash),mobile||isEmpty(getParameterByName("pagesize")&&!isEmpty(getParameterByName("curPage")))||(window.location.href=updateQueryStringParameter(hrefWithoutHash.replace("pagesize=1",""),"curPage",Math.ceil(getParameterByName("curPage")/10))+window.location.hash),1<curPage()&&mobile&&(document.getElementsByClassName("subtitle")[0].remove(),ScrollToElement("#interestQuestionsMobile"))},cookieUpdate=function(){var i,answers,cookieValue=getCookie("recordedInterestAssessmentSelection"),selectedOptions=isEmpty(cookieValue)?"000000000000000000000000000000":cookieValue;isEmpty(cookieValue)?(answers=window.location.hash,isEmpty(answers)?(window.location.hash=selectedOptions,setcookie_samesite("recordedInterestAssessmentSelection",selectedOptions,"lax")):(setcookie_samesite("recordedInterestAssessmentSelection",window.location.hash.substr(1),"lax"),window.location.reload())):isEmpty(window.location.hash)?window.location.hash=cookieValue:window.location.hash.substr(1)!==cookieValue&&(setcookie_samesite("recordedInterestAssessmentSelection",window.location.hash.substr(1),"lax"),window.location.reload()),isEmpty(cookieValue)||isMobile()||(selectedOptions=cookieValue,i=0,document.querySelectorAll("#interestQuestions tbody tr").forEach(function(option){var cellSelectedOption=selectedOptions.charAt((curPage()-1)*pageSize()+i);0!==cellSelectedOption&&option.cells[parseInt(cellSelectedOption)].classList.add("active"),i++})),!isEmpty(getCookie("recordedInterestAssessmentSelection"))&&isMobile()&&0!==(answers=selectedOptions.charAt(curPage()-1))&&(document.getElementById("interestQuestionsMobile").getElementsByTagName("tbody")[0].getElementsByTagName("td")[answers].className+=" active")},nextPage=function(){var nextPage=document.getElementById("nextPageButton");isEmpty(nextPage)||nextPage.addEventListener("click",e=>moveToNextPage(e,isMobile(),curPage(),isEmpty(getCookie("recordedInterestAssessmentSelection"))?"000000000000000000000000000000":getCookie("recordedInterestAssessmentSelection")))},previousPage=function(){var previousPage=document.getElementById("previousPageButton");isEmpty(previousPage)||previousPage.addEventListener("click",function(e){window.location.href=function(e){e.preventDefault();var e=Number(getParameterByName("curPage")),path=window.location.href;{var newCurPageString;0===e||1===e?path=window.location.pathname.replace(/interest-assessment-questions.aspx/gi,"interest-assessment.aspx"):!isEmpty(e)&&2<=Number(e)&&(newCurPageString="?curPage="+(e-=1),window.innerWidth<IAMobileBreakPoint&&(newCurPageString="?pagesize=1&curPage="+e),path=window.location.pathname+newCurPageString)}return preservePid(window.location.origin+path)}(e)})},addSelectedOption=function(){var updateAnswer,allOptions=document.querySelectorAll(".select-option");0===allOptions.length?console.error('The selector "select-option" is not available'):(updateAnswer=function(answers){setcookie_samesite("recordedInterestAssessmentSelection",answers,"lax"),window.location.hash=answers},allOptions.forEach(function(option){option.addEventListener("click",function(e){var col,row,selectedOptions=isEmpty(getCookie("recordedInterestAssessmentSelection"))?"000000000000000000000000000000":getCookie("recordedInterestAssessmentSelection");this.classList.contains("active")?isMobile()&&moveToNextPage(e,isMobile(),curPage(),selectedOptions):(col=[].slice.call(this.parentNode.children).indexOf(this),row=[].slice.call(this.parentNode.parentNode.children).indexOf(this.parentNode),isMobile()?("0"!==selectedOptions.charAt(curPage()-1)&&(document.getElementById("interestQuestionsMobile").getElementsByTagName("tbody")[0].getElementsByTagName("td")[selectedOptions.charAt(curPage()-1)].className="select-option"),selectedOptions=setCharAt(selectedOptions,curPage()-1,row),updateAnswer(selectedOptions),this.classList.add("active"),moveToNextPage(e,isMobile(),curPage(),selectedOptions)):(this.parentNode.children[selectedOptions.charAt(10*(curPage()-1)+row)].classList.remove("active"),this.classList.add("active"),selectedOptions=setCharAt(selectedOptions,row+(curPage()-1)*pageSize(),col),updateAnswer(selectedOptions)))}),option.addEventListener("keypress",function(e){var selectedOptions=isEmpty(getCookie("recordedInterestAssessmentSelection"))?"000000000000000000000000000000":getCookie("recordedInterestAssessmentSelection"),col=[].slice.call(this.parentNode.children).indexOf(this),row=[].slice.call(this.parentNode.parentNode.children).indexOf(this.parentNode);this.parentNode.children[selectedOptions.charAt(10*(curPage()-1)+row)].classList.remove("active"),this.classList.add("active"),selectedOptions=setCharAt(selectedOptions,row+(curPage()-1)*pageSize(),col),updateAnswer(selectedOptions)})}))},updateFocusBorder=function(){var selectedOptionsAnchors=document.querySelectorAll(".select-option a");isEmpty(selectedOptionsAnchors)||selectedOptionsAnchors.forEach(selectedOptionAnchor=>{selectedOptionAnchor.addEventListener("focus",function(e){this.parentNode.style.border="2px solid #a56716"}),selectedOptionAnchor.addEventListener("focusout",function(e){this.parentNode.style.border="solid 2px #ddd"})})};function setCharAt(str,index,chr){return index>str.length-1?str:str.substr(0,index)+chr+str.substr(index+1)}function moveToNextPage(e,isMobile,curPage,selectedOptions){e.preventDefault();var e=Number(getParameterByName("curPage")),path=window.location.pathname,commonErrors=document.getElementById("common-errors");if(commonErrors.innerHTML="",commonErrors.classList.remove("show"),isMobile){if("0"===selectedOptions[curPage-1])return"es"===getCookie("lang")?commonErrors.innerHTML="<li>Por favor seleccione una respuesta.</li>":commonErrors.innerHTML="<li>Please select an answer.</li>",commonErrors.classList.add("show"),ScrollToElement("#common-errors"),void document.getElementById("interestAssessmentQuestionMobile").focus()}else{for(var answerChecker=!0,endIndex=10*curPage,i=10*(curPage-1);i<endIndex;i++)if("0"===selectedOptions[i]){answerChecker=!1;break}if(!answerChecker)return"es"===getCookie("lang")?commonErrors.innerHTML="<li>Por favor, conteste todas las preguntas y, a continuaci√≥n, hacer clic en Siguiente.</li>":commonErrors.innerHTML="<li>Please answer all questions, and then click Next again.</li>",commonErrors.classList.add("show"),void ScrollToElement("#common-errors")}return 0===e?(path+="?curPage=2",isMobile&&(path+="?pagesize=1&curPage=2")):path=3<=e&&!isMobile||30===e&&isMobile?window.location.pathname.replace(/interest-assessment-questions/gi,"interest-assessment-results")+"?answers="+getCookie("recordedInterestAssessmentSelection").substr(0,30):(curPage="?curPage="+(e+=1),window.innerWidth<=IAMobileBreakPoint&&(curPage="?pagesize=1&curPage="+e),window.location.pathname+curPage+"#"+selectedOptions),window.location.href=preservePid(window.location.origin+path)}function preservePid(url){var pid=getParameterByName("pid");if(isEmpty(pid)||0<url.indexOf("pid"))return url;var url=url.split("?"),remain="#"===url[1][0]?url[1]:"&"+url[1];return url[0]+"?pid="+pid+remain}}),ResultPage=function(){this.init=function(){(-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-results.aspx")||-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-results-app.aspx"))&&(resumeAssessmentSession(),errorMessage(),generateResultCookie(),returnToQuestionButton(),setChartSize(),resultDownloadButton())};var resumeAssessmentSession=function(){var nickName,querypid;null!==document.getElementById("header-login")&&(nickName=document.getElementById("header-login").textContent,querypid=getParameterByName("pid"),isEmpty(nickName)?isEmpty(querypid)||(delete qd.pid,window.location=get_updateUrlFromDictionary()):(isEmpty(querypid)||isNaN(Number.parseInt(querypid,10)))&&(querypid=getSessionStorageIaPid(nickName),isEmpty(querypid)||isNaN(Number.parseInt(querypid,10))||(window.location=updateQueryStringParameter(window.location.href,"pid",querypid))))},getSessionStorageIaPid=function(nickName){nickName=sessionStorage.getItem(nickName+"-pid");if(isEmpty(nickName))return null;var kv,pid;for(kv of nickName.split("&"))if(console.log(kv),console.log("IA:"),-1<kv.indexOf("IA:"))return pid=kv.replace("IA:",""),console.log(pid),pid;return null},errorMessage=function(){var chartErrorMessage=document.getElementsByClassName("chart")[0].getElementsByTagName("span"),contentErrorMessage=document.getElementById("ErrorResultMessage"),tableContent=document.getElementsByClassName("cos-table-responsive"),techErrorCheck=!isEmpty(contentErrorMessage)&&0<chartErrorMessage.length&&0<chartErrorMessage[0].innerText.indexOf("technical difficulties");(!isEmpty(chartErrorMessage)&&techErrorCheck||!isEmpty(tableContent)&&!isEmpty(contentErrorMessage)&&0<contentErrorMessage[0].innerText.indexOf("technical difficulties"))&&(contentErrorMessage.style.display="none")},setChartSize=function(){var width;width=$(window).width(),$.cookie("BrowserWidth",width)},generateResultCookie=function(){var cookieValue=getCookie("recordedInterestAssessmentSelection"),answers=getParameterByName("answers");!isEmpty(cookieValue)&&cookieValue===getParameterByName(answers)||setcookie_samesite("recordedInterestAssessmentSelection",answers,"lax")},returnToQuestionButton=function(){document.getElementById("ChangeInterestAssessAnswer").addEventListener("click",function(e){window.location.href=function(e){return e.preventDefault(),736<window.innerWidth?window.location.pathname.replace(/interest-assessment-results/gi,"interest-assessment-questions"):window.location.pathname.replace(/interest-assessment-results/gi,"interest-assessment-questions")+"?pagesize=1&curPage=1"}(e)})},resultDownloadButton=function(){var downloadValidation,downloadButton=document.getElementById("DownloadResults");null!=downloadButton&&(downloadValidation=document.getElementById("downloadValidation"),document.querySelectorAll(".radio-group div input").forEach(radio=>{radio.addEventListener("click",function(e){isEmpty(downloadValidation)||(downloadValidation.style.display="none")})}),downloadButton.addEventListener("click",function(e){var format,answers=getParameterByName("answers"),jobzone=getParameterByName("jobzone"),mfilter=getParameterByName("mfilter"),sortdirections=getParameterByName("sortdirections"),sortcolumns=getParameterByName("sortcolumns"),lang=getParameterByName("lang");0<document.querySelectorAll("input[name='Download']:checked").length?(format=document.querySelectorAll("input[name='Download']:checked")[0].value,answers=window.location.pathname+"?answers="+answers,null!=jobzone&&(answers+="&jobzone="+jobzone),null!=mfilter&&(answers+="&mfilter="+mfilter),null!=sortdirections&&(answers+="&sortdirections="+sortdirections),null!=sortcolumns&&(answers+="&sortcolumns="+sortcolumns),null!=lang&&(answers+="&lang="+lang),jobzone=window.location.protocol+"//"+window.location.host+"/app_handlers/InterestAssessDownloadHandler.ashx?toolName=InterestAssessment&fileFormat="+format+"&pageUrl="+answers.replace(new RegExp("&","g"),"~").replace("?~","?")+"&compName=~MAIN~InterestProfilterResults_Dynamic",window.location=jobzone):(downloadValidation.style.display="inline-block",document.getElementById("rdExcel").focus())}))}},ScorePage=function(){this.init=function(){(-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-riasec-scores.aspx")||-1<window.location.pathname.toLowerCase().indexOf("interest-assessment-riasec-scores-app.aspx"))&&(backToResultPageButton(),setChartSize(),showContent(),scoreResultDownloadButton(),collapseChange())};var backToResultPageButton=function(){document.getElementById("BacktoIAResButton").addEventListener("click",function(e){window.location.href=function(e){return e.preventDefault(),window.location.href.replace(/riasec-scores/gi,"results")}(e)})},setChartSize=function(){var width;width=$(window).width(),$.cookie("BrowserWidth",width)},collapseChange=function(){var titleArea;for(titleArea of document.getElementsByClassName("title-area"))titleArea.removeAttribute("data-toggle"),titleArea.removeAttribute("data-target"),"realistics"==titleArea.nextElementSibling.id?titleArea.nextElementSibling.setAttribute("class","content-expand"):titleArea.nextElementSibling.setAttribute("class","content-noexpand")},showContent=function(){document.querySelectorAll(".title-area").forEach(titleArea=>{titleArea.addEventListener("click",function(e){collapseContent(titleArea)}),titleArea.addEventListener("keypress",function(e){collapseContent(titleArea)})})},scoreResultDownloadButton=function(){var selectOption,downloadValidation;null!=document.getElementById("DownloadResults")&&(selectOption=document.querySelectorAll(".radio-group div input"),downloadValidation=document.getElementById("downloadValidation"),selectOption.forEach(radio=>{radio.addEventListener("click",function(e){isEmpty(downloadValidation)||(downloadValidation.style.display="none")})}),document.getElementById("DownloadResults").addEventListener("click",function(e){var format,answers=getParameterByName("answers"),lang=getParameterByName("lang");0<document.querySelectorAll("input[name='Download']:checked").length?(format=document.querySelectorAll("input[name='Download']:checked")[0].value,answers=window.location.pathname+"?answers="+answers,null!=lang&&(answers+="&lang="+lang),lang=window.location.protocol+"//"+window.location.host+"/app_handlers/InterestAssessDownloadHandler.ashx?toolName=InterestAssessmentRiasecScores&fileFormat="+format+"&pageUrl="+answers.replace(new RegExp("&","g"),"~").replace("?~","?")+"&compName=~MAIN~YourScoreDetailsContent",format=document.getElementById("interestResChart"),isEmpty(format)||(answers=format.getAttribute("src"),$.ajax({type:"POST",url:lang,data:JSON.stringify({Url:answers}),xhr:function(){var xhr=new XMLHttpRequest;return xhr.responseType="blob",xhr},success:function(response,status,xhr){var URL,downloadUrl,filename="",disposition=xhr.getResponseHeader("Content-Disposition"),disposition=(disposition&&-1!==disposition.indexOf("attachment")&&(null!=(disposition=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(disposition))&&disposition[1]&&(filename=disposition[1].replace(/['"]/g,""))),xhr.getResponseHeader("Content-Type")),xhr=new Blob([response],{type:disposition});console.log(xhr),void 0!==window.navigator.msSaveBlob?window.navigator.msSaveBlob(xhr,filename):(URL=window.URL||window.webkitURL,downloadUrl=URL.createObjectURL(xhr),!filename||void 0===(response=document.createElement("a")).download?window.location=downloadUrl:(response.href=downloadUrl,response.download=filename,document.body.appendChild(response),response.click()),setTimeout(function(){URL.revokeObjectURL(downloadUrl)},100))},error:function(){console.log("error")}}))):(downloadValidation.style.display="inline-block",document.getElementById("rdPDF").focus())}))};var collapseContent=function(titleArea){"accordion first opened"==titleArea.parentNode.getAttribute("class")?(titleArea.parentNode.setAttribute("class","accordion first closed"),titleArea.setAttribute("aria-expanded",!1),titleArea.setAttribute("class","title-area"),titleArea.children[0].children[0].children[0].setAttribute("class","fa fa-caret-down"),titleArea.nextElementSibling.setAttribute("class","content-noexpend"),titleArea.nextElementSibling.style.display="none",titleArea.nextElementSibling.setAttribute("aria-expended",!1)):(titleArea.parentNode.setAttribute("class","accordion first opened"),titleArea.setAttribute("aria-expanded",!0),titleArea.setAttribute("class","title-area collapsed"),titleArea.children[0].children[0].children[0].setAttribute("class","fa fa-caret-up"),titleArea.nextElementSibling.setAttribute("class","content-expend"),titleArea.nextElementSibling.style.display="inline-block",titleArea.nextElementSibling.setAttribute("aria-expended",!0),titleArea.nextElementSibling.setAttribute("style","padding: 5px 15px 0px; font-style: normal; background: white; color: black;"))}};